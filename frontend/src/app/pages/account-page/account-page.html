<section>
  <div
    class="mx-auto max-w-7xl p-4 grid grid-cols-1 md:grid-cols-[auto_1fr] md:gap-8 overflow-x-hidden"
  >
    <p-card
      header="Perfil"
      class=" md:w-sm  {{
        optionSelected === ''
          ? ''
          : 'absolute opacity-0 md:static md:opacity-100'
      }}"
    >
      <div
        class="flex flex-col items-center gap-2 {{
          optionSelected === '' ? '' : 'hidden md:flex'
        }}"
      >
        <i class="pi pi-user mb-4" style="font-size: 5rem"></i>
        <h2 class="text-2xl font-semibold">{{dataUser?.name}} {{dataUser?.lastname}} </h2>
        <p>{{dataUser?.email}}</p>

        <ul class="w-full">
          <p-divider />
          @for (option of options; track $index) {
          <li
            (click)="handlerOption(option)"
            class="px-4 py-1 text-center cursor-pointer"
          >
            {{ option }}
          </li>
          <p-divider />
          }
        </ul>

        <button pButton (click)="showDialog()" severity="danger" label="Eliminar Cuenta" class="w-full"></button>
        <button pButton (click)="logOut()" label="Cerrar SesiÃ³n" severity="contrast" class="w-full"></button>
        <p-dialog header="Seguro que deseas Eliminar tu cuenta?" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
          <div class="w-full grid grid-cols-2 gap-4">
            <button pButton severity="contrast" (click)="visible = false" label="Cancelar"></button>
            <button pButton severity="danger" (click)="deleteAccount()"  label="Confirmar"></button>
          </div>
        </p-dialog>
      </div>
    </p-card>

    <div
      (click)="handlerOption('')"
      class="text-sm flex z-10 justify-self-start md:hidden items-center gap-2 mt-4 cursor-pointer {{
        optionSelected === '' ? 'hidden' : ''
      }}"
    >
      <i class="pi pi-arrow-left" style="font-size: 0.8rem"></i>
      <span>Atras</span>
    </div>

    @if (optionSelected === "Mi Perfil" || optionSelected === '') {
    <app-perfil-component [userData]="dataUser" [optionSelected]="optionSelected" (userDataUpdated)="handleUpdateUserData($event)" />

    } @else if (optionSelected === "Mis Compras") {
    <app-compras-component [optionSelected]="optionSelected" />
    } @else if (optionSelected === "Mis Ventas") {
    <app-ventas-component [optionSelected]="optionSelected" />
    }
  </div>
</section>
